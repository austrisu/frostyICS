FUNCTION "temperature_regulator" : Void
{ S7_Optimized_Access := 'TRUE' }
VERSION : 0.1
   VAR_INPUT 
      max_presure : Int;
      flow_speed : Int;
      fluid_t : Int;
      system_presure : Int;
      burning_temperature : Int;
   END_VAR

   VAR_OUTPUT 
      presure_err : Bool;
   END_VAR

   VAR_IN_OUT 
      emerg_coll_down : Bool;
      gas_flow : Int;
      pump_speed : Int;
      valve_state : Bool;
      temperature_setpoint : Int;
   END_VAR

   VAR_TEMP 
      impulse : Bool;
   END_VAR


BEGIN
	"LGF_Impulse_DB_2"(frequency:=0.7,
	                   impulse=>#impulse);
	
	IF #system_presure > #max_presure THEN
	    // Statement section IF
	    #temperature_setpoint := 0;
	    #presure_err := true;
	END_IF;
	
	IF #impulse = TRUE THEN
	    IF #temperature_setpoint > 0 THEN
	        // Statement section IF
	        #pump_speed := 869;
	    ELSE
	        IF #pump_speed > 0 THEN
	            // Statement section IF
	            #pump_speed := #pimp_speed - 1;
	        ELSE
	            #pump_speed := 0;
	        END_IF;
	        
	        
	    END_IF;
	    // Statement section IF
	    IF #temperature_setpoint > #fluid_t THEN
	        // Statement section IF
	        #gas_flow := #gas_flow + 1;
	    ELSIF #temperature_setpoint < #fluid_t THEN
	        #gas_flow := #gas_flow - 1;
	    END_IF;
	    
	END_IF;
	
	
	
	
END_FUNCTION




*****************************





